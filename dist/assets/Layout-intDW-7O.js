import{r as e,j as t,I as r,A as a,h as s,C as n,X as o,M as l,S as i,i as d,u as c,L as u,k as m,l as g,m as h,n as x,o as b,p as f,q as y,O as k}from"./react-vendor-CYm809Et.js";import{u as v}from"./authStore-D2_G-NGY.js";import{u as p}from"./useToast-DgYTMLSM.js";import{c as j,p as w,a as N}from"./utils-vendor-YtSAaKOK.js";import"./vendor-DC1Pnyyi.js";import"./chart-vendor-hJRC9QiP.js";const E={success:n,error:s,warning:a,info:r},T={success:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-300",error:"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-300",warning:"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 text-yellow-800 dark:text-yellow-300",info:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-300"},C={success:"text-green-600 dark:text-green-400",error:"text-red-600 dark:text-red-400",warning:"text-yellow-600 dark:text-yellow-400",info:"text-blue-600 dark:text-blue-400"},L=({message:r,type:a,onClose:s,duration:n=5e3})=>{const l=E[a];return e.useEffect(()=>{if(n>0){const e=setTimeout(s,n);return()=>clearTimeout(e)}},[n,s]),t.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border shadow-lg ${T[a]} animate-slide-in`,role:"alert","aria-live":"polite",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(l,{className:`h-5 w-5 ${C[a]} mr-3`,"aria-hidden":"true"}),t.jsx("p",{className:"text-sm font-medium",children:r})]}),t.jsx("button",{onClick:s,className:"ml-4 inline-flex text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 rounded","aria-label":"Close notification",children:t.jsx(o,{className:"h-5 w-5"})})]})},S=()=>{const{toasts:e,removeToast:r}=p();return 0===e.length?null:t.jsx("div",{className:"fixed bottom-0 right-0 z-50 p-4 space-y-4 max-w-md w-full","aria-live":"polite","aria-atomic":"true",role:"region","aria-label":"Notifications",children:e.map(e=>t.jsx(L,{message:e.message,type:e.type,onClose:()=>r(e.id)},e.id))})},z=()=>"undefined"==typeof window?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",$=e=>"system"===e?z():e,A=e=>{if("undefined"==typeof document)return;const t=document.documentElement;"dark"===e?t.classList.add("dark"):t.classList.remove("dark")},M=j()(w((e,t)=>{if("undefined"!=typeof window){const r=window.matchMedia("(prefers-color-scheme: dark)"),a=()=>{const{theme:r}=t();if("system"===r){const t=z();e({actualTheme:t}),A(t)}};r.addEventListener?r.addEventListener("change",a):r.addListener(a)}return{theme:"system",actualTheme:z(),setTheme:t=>{const r=$(t);e({theme:t,actualTheme:r}),A(r)},toggleTheme:()=>{const{actualTheme:r}=t(),a="light"===r?"dark":"light";e({theme:a,actualTheme:a}),A(a)}}},{name:"kumomta-theme-storage",storage:N(()=>localStorage),partialize:e=>({theme:e.theme}),onRehydrateStorage:()=>e=>{if(e){const t=$(e.theme);e.actualTheme=t,A(t)}}}));if("undefined"!=typeof document){const e=localStorage.getItem("kumomta-theme-storage");let t="system";if(e)try{const r=JSON.parse(e);t=r.state?.theme||"system"}catch{}const r=$(t);A(r)}const D=({variant:r="button",className:a=""})=>{const{theme:s,actualTheme:n,setTheme:o}=M(),[c,u]=e.useState(!1),m=e.useRef(null);e.useEffect(()=>{if(!c)return;const e=e=>{m.current&&!m.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[c]),e.useEffect(()=>{if(!c)return;const e=e=>{"Escape"===e.key&&u(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[c]);const g=(e=20)=>{const r={size:e,"aria-hidden":"true"};return"dark"===n?t.jsx(l,{...r}):t.jsx(i,{...r})},h=[{value:"light",label:"Light",icon:t.jsx(i,{size:16})},{value:"dark",label:"Dark",icon:t.jsx(l,{size:16})},{value:"system",label:"System",icon:t.jsx(d,{size:16})}];return"button"===r?t.jsx("button",{onClick:()=>{o("light"===n?"dark":"light")},className:`p-2 rounded-lg transition-colors hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 ${a}`,"aria-label":`Switch to ${"light"===n?"dark":"light"} mode`,title:`Current theme: ${s}${"system"===s?` (${n})`:""}`,children:g()}):t.jsxs("div",{className:`relative ${a}`,ref:m,children:[t.jsx("button",{onClick:()=>u(!c),className:"p-2 rounded-lg transition-colors hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Theme options","aria-expanded":c,"aria-haspopup":"true",children:g()}),c&&t.jsx("div",{className:"absolute right-0 mt-2 w-36 rounded-md shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none z-50",role:"menu","aria-orientation":"vertical",children:t.jsx("div",{className:"py-1",children:h.map(e=>t.jsxs("button",{onClick:()=>{o(e.value),u(!1)},className:"w-full flex items-center px-4 py-2 text-sm transition-colors "+(s===e.value?"bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-200":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"),role:"menuitem",children:[t.jsx("span",{className:"mr-2",children:e.icon}),e.label,s===e.value&&t.jsx("span",{className:"ml-auto text-blue-600 dark:text-blue-400",children:"âœ“"})]},e.value))})})]})},q=()=>{const r=c(),a=v(e=>e.logout),[s,n]=e.useState(!1),l=e.useRef(null),i=[{name:"Dashboard",path:"/",icon:u},{name:"Queue Manager",path:"/queue",icon:m},{name:"Configuration",path:"/config",icon:g},{name:"Security",path:"/security",icon:h},{name:"Analytics",path:"/analytics",icon:x}],d=()=>n(!1);return e.useEffect(()=>{const e=e=>{"Escape"===e.key&&s&&d()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s]),e.useEffect(()=>{if(!s||!l.current)return;const e=l.current,t=e.querySelectorAll('a[href], button:not([disabled]), [tabindex]:not([tabindex="-1"])');if(0===t.length)return;const r=t[0],a=t[t.length-1],n=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===r&&(a.focus(),e.preventDefault()):document.activeElement===a&&(r.focus(),e.preventDefault()))};return e.addEventListener("keydown",n),r.focus(),()=>{e.removeEventListener("keydown",n)}},[s]),t.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-bg transition-colors",children:[t.jsxs("div",{className:"flex h-screen overflow-hidden",children:[s&&t.jsx("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 dark:bg-gray-900 dark:bg-opacity-80 lg:hidden",onClick:d,"aria-hidden":"true"}),t.jsxs("aside",{ref:l,className:"fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-dark-surface shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-auto "+(s?"translate-x-0":"-translate-x-full"),role:"navigation","aria-label":"Main navigation",children:[t.jsxs("div",{className:"flex h-16 items-center justify-between px-6 border-b border-gray-200 dark:border-dark-border",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-dark-text",children:"KumoMTA Admin"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(D,{variant:"dropdown"}),t.jsx("button",{onClick:d,className:"lg:hidden p-2 rounded-md text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Close sidebar",children:t.jsx(o,{className:"h-6 w-6"})})]})]}),t.jsxs("nav",{className:"mt-6",children:[i.map(e=>{const a=e.icon,s=r.pathname===e.path;return t.jsxs(b,{to:e.path,onClick:d,className:"flex items-center px-6 py-3 text-sm transition-colors "+(s?"bg-blue-50 dark:bg-blue-900 text-blue-600 dark:text-blue-300 border-l-4 border-blue-600":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white border-l-4 border-transparent"),"aria-current":s?"page":void 0,children:[t.jsx(a,{className:"mr-3 h-5 w-5","aria-hidden":"true"}),e.name]},e.name)}),t.jsxs("button",{onClick:()=>{a(),d()},className:"flex w-full items-center px-6 py-3 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white border-l-4 border-transparent transition-colors",children:[t.jsx(f,{className:"mr-3 h-5 w-5","aria-hidden":"true"}),"Logout"]})]})]}),t.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[t.jsxs("header",{className:"lg:hidden bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-dark-border px-4 py-3 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("button",{onClick:()=>n(!0),className:"p-2 rounded-md text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Open sidebar",children:t.jsx(y,{className:"h-6 w-6"})}),t.jsx("h1",{className:"ml-4 text-lg font-semibold text-gray-900 dark:text-dark-text",children:"KumoMTA Admin"})]}),t.jsx(D,{variant:"button"})]}),t.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50 dark:bg-dark-bg",children:t.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:t.jsx(k,{})})})]})]}),t.jsx(S,{})]})};export{q as default};
