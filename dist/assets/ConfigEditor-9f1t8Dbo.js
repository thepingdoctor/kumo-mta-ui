const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/api-BZ6vNX7b.js","assets/http-vendor-CHM7ATol.js","assets/authStore-D2_G-NGY.js","assets/utils-vendor-YtSAaKOK.js","assets/react-vendor-CYm809Et.js","assets/vendor-DC1Pnyyi.js","assets/chart-vendor-hJRC9QiP.js"])))=>i.map(i=>d[i]);
import{_ as e}from"./vendor-DC1Pnyyi.js";import{j as a,J as i,A as t,K as r,b as n,P as o}from"./react-vendor-CYm809Et.js";import"./chart-vendor-hJRC9QiP.js";const s=({section:e,control:r,errors:n})=>a.jsx("div",{className:"bg-white shadow rounded-lg",children:a.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[a.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:e.title}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e.description}),a.jsx("div",{className:"mt-6 space-y-6",children:e.fields.map(e=>{const o=n[e.id];return a.jsxs("div",{className:"sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:pt-5",children:[a.jsxs("label",{htmlFor:e.id,className:"block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2",children:[e.label,a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e.description})]}),a.jsxs("div",{className:"mt-1 sm:mt-0 sm:col-span-2",children:[a.jsx(i,{name:e.id,control:r,defaultValue:e.defaultValue,rules:e.validation,render:({field:{onChange:i,value:t}})=>{switch(e.type){case"boolean":return a.jsx("div",{className:"flex items-center h-5",children:a.jsx("input",{type:"checkbox",checked:t,onChange:i,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})});case"number":return a.jsx("input",{type:"number",value:t,onChange:i,min:e.validation?.min,max:e.validation?.max,className:"max-w-lg block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:max-w-xs sm:text-sm border-gray-300 rounded-md"});case"select":return a.jsx("select",{value:t,onChange:i,className:"max-w-lg block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:max-w-xs sm:text-sm border-gray-300 rounded-md",children:e.validation?.options?.map(e=>a.jsx("option",{value:e,children:e},e))});case"array":return a.jsx("input",{type:"text",value:Array.isArray(t)?t.join(", "):t,onChange:e=>i(e.target.value.split(",").map(e=>e.trim())),className:"max-w-lg block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm border-gray-300 rounded-md",placeholder:"Comma-separated values"});default:return a.jsx("input",{type:"text",value:t,onChange:i,className:"max-w-lg block w-full shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm border-gray-300 rounded-md"})}}}),o&&a.jsxs("div",{className:"mt-2 flex items-center text-sm text-red-600",children:[a.jsx(t,{className:"h-4 w-4 mr-1"}),a.jsx("span",{children:o.message})]})]})]},e.id)})})]})}),l=[{id:"core",title:"Core Settings",description:"Essential server configuration parameters",fields:[{id:"serverName",label:"Server Name",description:"Unique identifier for this MTA server instance",type:"text",defaultValue:"kumo-mta-01",validation:{required:!0,pattern:"^[a-zA-Z0-9-]+$"}},{id:"maxConcurrentConnections",label:"Max Concurrent Connections",description:"Maximum number of simultaneous SMTP connections",type:"number",defaultValue:1e3,validation:{required:!0,min:1,max:1e4}},{id:"defaultPort",label:"Default SMTP Port",description:"Default port for incoming SMTP connections",type:"number",defaultValue:25,validation:{required:!0,min:1,max:65535}},{id:"ipv6Enabled",label:"Enable IPv6",description:"Enable IPv6 support for SMTP connections",type:"boolean",defaultValue:!0},{id:"dnsResolvers",label:"DNS Resolvers",description:"List of DNS resolvers for MX lookups (comma-separated)",type:"array",defaultValue:["1.1.1.1","8.8.8.8"],validation:{required:!0}},{id:"logLevel",label:"Log Level",description:"Logging verbosity level",type:"select",defaultValue:"info",validation:{required:!0,options:["debug","info","warn","error"]}},{id:"maxMessageSize",label:"Max Message Size (MB)",description:"Maximum size of incoming messages in megabytes",type:"number",defaultValue:25,validation:{required:!0,min:1,max:100}},{id:"queueRetryInterval",label:"Queue Retry Interval (minutes)",description:"Time between delivery attempts for failed messages",type:"number",defaultValue:15,validation:{required:!0,min:1,max:1440}}]},{id:"integration",title:"Integration Settings",description:"External service connections and API configuration",fields:[{id:"apiEndpoint",label:"API Endpoint",description:"Primary API endpoint URL",type:"text",defaultValue:"https://api.example.com/v1",validation:{required:!0,pattern:"^https?://.+"}},{id:"apiVersion",label:"API Version",description:"API version to use for requests",type:"text",defaultValue:"v1",validation:{required:!0}},{id:"apiKey",label:"API Key",description:"Authentication key for API access",type:"text",defaultValue:"",validation:{required:!0}},{id:"webhookUrl",label:"Webhook URL",description:"Endpoint for receiving webhook notifications",type:"text",defaultValue:"",validation:{pattern:"^https?://.+"}},{id:"syncInterval",label:"Sync Interval (minutes)",description:"Frequency of data synchronization",type:"number",defaultValue:5,validation:{required:!0,min:1,max:1440}},{id:"backupEnabled",label:"Enable Backups",description:"Enable automated backups of configuration and data",type:"boolean",defaultValue:!0},{id:"backupInterval",label:"Backup Interval (hours)",description:"Frequency of automated backups",type:"number",defaultValue:24,validation:{required:!0,min:1,max:168}},{id:"backupLocation",label:"Backup Location",description:"Storage location for backup files",type:"text",defaultValue:"/var/backups/kumo-mta",validation:{required:!0}},{id:"failoverEndpoint",label:"Failover Endpoint",description:"Backup API endpoint for failover scenarios",type:"text",defaultValue:"",validation:{pattern:"^https?://.+"}}]},{id:"performance",title:"Performance Settings",description:"Server performance and resource utilization configuration",fields:[{id:"cacheEnabled",label:"Enable Caching",description:"Enable in-memory caching for improved performance",type:"boolean",defaultValue:!0},{id:"cacheSize",label:"Cache Size (MB)",description:"Maximum memory allocation for cache",type:"number",defaultValue:512,validation:{required:!0,min:64,max:4096}},{id:"cacheExpiration",label:"Cache Expiration (minutes)",description:"Time before cached items expire",type:"number",defaultValue:60,validation:{required:!0,min:1,max:1440}},{id:"loadBalancingStrategy",label:"Load Balancing Strategy",description:"Algorithm for distributing incoming connections",type:"select",defaultValue:"round-robin",validation:{required:!0,options:["round-robin","least-connections","ip-hash"]}},{id:"maxMemoryUsage",label:"Max Memory Usage (%)",description:"Maximum system memory utilization",type:"number",defaultValue:80,validation:{required:!0,min:10,max:95}},{id:"maxCpuUsage",label:"Max CPU Usage (%)",description:"Maximum CPU utilization per core",type:"number",defaultValue:90,validation:{required:!0,min:10,max:100}},{id:"connectionTimeout",label:"Connection Timeout (seconds)",description:"Time before idle connections are closed",type:"number",defaultValue:30,validation:{required:!0,min:1,max:300}},{id:"readTimeout",label:"Read Timeout (seconds)",description:"Maximum time to wait for client data",type:"number",defaultValue:60,validation:{required:!0,min:1,max:300}},{id:"writeTimeout",label:"Write Timeout (seconds)",description:"Maximum time to wait for client response",type:"number",defaultValue:60,validation:{required:!0,min:1,max:300}},{id:"queueWorkers",label:"Queue Workers",description:"Number of concurrent queue processing workers",type:"number",defaultValue:4,validation:{required:!0,min:1,max:32}}]}],d=()=>{const{control:i,handleSubmit:t,reset:d,formState:{isDirty:c,isSubmitting:u,errors:m}}=r(),p=async a=>{try{const i={maxConcurrentDeliveries:a.maxConcurrentDeliveries,messageRetention:a.messageRetention,defaultDomain:a.defaultDomain},t={webhookUrl:a.webhookUrl,apiKey:a.apiKey},r={connectionPoolSize:a.connectionPoolSize,maxRetries:a.maxRetries},{apiService:n}=await e(async()=>{const{apiService:e}=await import("./api-BZ6vNX7b.js");return{apiService:e}},__vite__mapDeps([0,1,2,3,4,5,6]));await Promise.all([Object.keys(i).length>0?n.config.updateCore(i):Promise.resolve(),Object.keys(t).length>0?n.config.updateIntegration(t):Promise.resolve(),Object.keys(r).length>0?n.config.updatePerformance(r):Promise.resolve()])}catch(i){i instanceof Error&&i.message;throw i}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Configuration"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your KumoMTA server settings and preferences"})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("button",{type:"button",onClick:()=>d(),disabled:!c||u,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx(n,{className:"h-4 w-4 mr-2"}),"Reset"]}),a.jsxs("button",{onClick:t(p),disabled:!c||u,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx(o,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]}),a.jsx("form",{onSubmit:t(p),className:"space-y-8",children:l.map(e=>a.jsx(s,{section:e,control:i,errors:m},e.id))})]})};export{d as default};
