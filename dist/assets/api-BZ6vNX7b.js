import{a as e}from"./http-vendor-CHM7ATol.js";import{u as t}from"./authStore-D2_G-NGY.js";import"./utils-vendor-YtSAaKOK.js";import"./react-vendor-CYm809Et.js";import"./vendor-DC1Pnyyi.js";import"./chart-vendor-hJRC9QiP.js";const r=e.create({baseURL:"http://localhost:8000",timeout:1e4,headers:{"Content-Type":"application/json"},withCredentials:!0});r.interceptors.request.use(e=>{const r=t.getState().token;r&&(e.headers.Authorization=`Basic ${r}`);const o=document.querySelector('meta[name="csrf-token"]')?.content;return o&&(e.headers["X-CSRF-Token"]=o),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,async e=>{if(!e.response)throw e.request?new Error("Network error: Unable to connect to server. Please check your connection."):new Error(`Request error: ${e.message}`);{const r=e.response.status;if(401===r)t.getState().logout(),window.location.href="/login";else{if(403===r)throw new Error("Access forbidden: You do not have permission to perform this action");if(r>=500)throw new Error(`Server error: ${e.response.data?.message||"Internal server error"}`)}}return Promise.reject(e)});const o={queue:{getItems:e=>r.get("/api/admin/queue/list",{params:e}),updateStatus:(e,t)=>r.put(`/api/admin/queue/${e}/status`,{status:t}),addCustomer:e=>r.post("/api/admin/queue/add",e),getMetrics:()=>r.get("/metrics.json")},kumomta:{getMetrics:()=>r.get("/metrics.json"),getBounces:()=>r.get("/api/admin/bounce/v1"),getScheduledQueue:e=>r.get("/api/admin/bounce-list/v1",{params:{domain:e}}),suspendQueue:(e,t,o)=>r.post("/api/admin/suspend/v1",{domain:e,reason:t,duration:o}),resumeQueue:e=>r.post("/api/admin/resume/v1",{domain:e}),suspendReadyQueue:(e,t)=>r.post("/api/admin/suspend-ready-q/v1",{domain:e,reason:t}),rebindMessages:e=>r.post("/api/admin/rebind/v1",e),bounceMessages:e=>r.post("/api/admin/bounce/v1",e),getTraceLogs:()=>r.get("/api/admin/trace-smtp-server/v1"),setDiagnosticLog:(e,t)=>r.post("/api/admin/set-diagnostic-log-filter/v1",{filter:e,duration:t})},config:{updateCore:e=>r.put("/api/admin/config/core",e),updateIntegration:e=>r.put("/api/admin/config/integration",e),updatePerformance:e=>r.put("/api/admin/config/performance",e),getCore:()=>r.get("/api/admin/config/core"),getIntegration:()=>r.get("/api/admin/config/integration"),getPerformance:()=>r.get("/api/admin/config/performance")}};export{o as apiService};
