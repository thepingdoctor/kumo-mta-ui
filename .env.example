# ===============================================
# KumoMTA UI - Environment Variables Template
# ===============================================
# Copy this file to .env and update with your values
# For production deployment, see .env.production.example

# ===============================================
# Application Environment
# ===============================================
# Options: development, staging, production
NODE_ENV=development
PORT=3000
PUBLIC_URL=http://localhost:3000

# ===============================================
# API Configuration
# ===============================================
# KumoMTA API base URL
VITE_API_URL=http://localhost:8000

# WebSocket URL for real-time updates (optional, defaults to VITE_API_URL with ws:// protocol)
VITE_WS_URL=ws://localhost:8000/ws

# API request timeout in milliseconds
API_TIMEOUT=30000

# ===============================================
# Authentication
# ===============================================
# Enable authentication (true/false)
VITE_AUTH_ENABLED=true

# Session timeout in milliseconds (default: 24 hours)
VITE_SESSION_TIMEOUT=86400000

# IMPORTANT: Change these secrets in production! Must be at least 32 characters
JWT_SECRET=change-me-to-a-very-long-secure-random-string-min-32-chars
JWT_EXPIRY=24h
SESSION_SECRET=change-me-to-another-very-long-secure-random-string
SESSION_MAX_AGE=86400000

# ===============================================
# Database Configuration
# ===============================================
# Full PostgreSQL connection string
DATABASE_URL=postgresql://kumomta_admin:change-me-password@localhost:5432/kumomta_ui

# Individual database connection parameters
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=kumomta_ui
POSTGRES_USER=kumomta_admin
POSTGRES_PASSWORD=change-me-database-password

# Connection pool settings
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_POOL_IDLE_TIMEOUT=30000

# ===============================================
# Redis (Session Store & Caching)
# ===============================================
# Redis connection URL
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=change-me-redis-password
REDIS_DB=0
REDIS_TTL=3600

# ===============================================
# Security
# ===============================================
# Allowed CORS origins (comma-separated for multiple origins)
CORS_ORIGIN=http://localhost:3000

# Allowed hosts for the application (comma-separated)
ALLOWED_HOSTS=localhost,127.0.0.1

# Content Security Policy report URI
CSP_REPORT_URI=/api/csp-report

# Rate limiting configuration
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX=100
RATE_LIMIT_AUTH_MAX=5

# ===============================================
# Monitoring & Logging
# ===============================================
# Log level: error, warn, info, http, verbose, debug, silly
LOG_LEVEL=info

# Enable performance metrics collection
ENABLE_METRICS=true

# Sentry Configuration (optional - leave empty to disable)
# Frontend Sentry (VITE_ prefix = client-side)
VITE_SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
VITE_APP_VERSION=1.0.0

# Sentry Build Configuration (for source map upload)
SENTRY_ORG=your-org-slug
SENTRY_PROJECT=kumomta-ui
SENTRY_AUTH_TOKEN=your-sentry-auth-token

# Legacy backend Sentry (if using backend monitoring)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_REPLAYS_SESSION_SAMPLE_RATE=0.1
SENTRY_REPLAYS_ON_ERROR_SAMPLE_RATE=1.0

# ===============================================
# Email Alerts (Optional)
# ===============================================
# SMTP server configuration
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=alerts@example.com
SMTP_PASSWORD=change-me-smtp-password

# Email addresses
SMTP_FROM=noreply@kumomta.example.com
ALERT_EMAIL=admin@example.com

# ===============================================
# Polling Configuration
# ===============================================
# Metrics refresh interval in milliseconds (default: 15000 = 15 seconds)
VITE_METRICS_INTERVAL=15000

# Queue refresh interval in milliseconds (default: 10000 = 10 seconds)
VITE_QUEUE_INTERVAL=10000

# ===============================================
# Feature Flags
# ===============================================
# Enable WebSocket real-time updates (default: false, uses polling)
VITE_ENABLE_WEBSOCKET=false

# Enable performance monitoring (default: true)
VITE_ENABLE_PERFORMANCE_MONITORING=true

# Enable error tracking (default: true)
VITE_ENABLE_ERROR_TRACKING=true

# Enable specific features
FEATURE_ANALYTICS=true
FEATURE_ADVANCED_ROUTING=true
FEATURE_AUDIT_LOGS=true
FEATURE_RBAC=true
FEATURE_DARK_MODE=true
FEATURE_EXPORT_DATA=true

# ===============================================
# Performance & Caching
# ===============================================
# Cache TTL in seconds
CACHE_TTL=300

# Maximum request body size
MAX_REQUEST_SIZE=10mb

# Enable compression
COMPRESSION_ENABLED=true

# Enable HTTP/2
ENABLE_HTTP2=true

# ===============================================
# Development Only
# ===============================================
# Vite development server port
VITE_DEV_SERVER_PORT=5173

# Enable development mode features
VITE_DEV_MODE=false

# Enable React Query DevTools
VITE_ENABLE_DEVTOOLS=false

# Enable hot module replacement
ENABLE_HOT_RELOAD=true

# Enable debug logging
DEBUG=false

# Use mock API instead of real backend
MOCK_API=false

# Enable CSRF protection
VITE_ENABLE_CSRF=true

# Force HTTPS in production
VITE_FORCE_HTTPS=false

# ===============================================
# Production Only (uncomment for production)
# ===============================================
# NODE_ENV=production
# PUBLIC_URL=https://kumomta.example.com
# VITE_API_URL=https://api.kumomta.example.com
# VITE_WS_URL=wss://api.kumomta.example.com/ws
# VITE_AUTH_ENABLED=true
# LOG_LEVEL=warn
# SENTRY_DSN=https://your-dsn@sentry.io/project
# SENTRY_ENVIRONMENT=production
# VITE_ENABLE_WEBSOCKET=true
# VITE_FORCE_HTTPS=true
